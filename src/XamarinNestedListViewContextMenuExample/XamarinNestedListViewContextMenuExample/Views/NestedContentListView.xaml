<?xml version="1.0" encoding="UTF-8"?>
<ContentView xmlns="http://xamarin.com/schemas/2014/forms" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:XamarinNestedListViewContextMenuExample.Views"
             x:Class="XamarinNestedListViewContextMenuExample.Views.NestedContentListView">
    <ContentView.Content>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>       <!-- 0: ContentText   TODO: Bind height -->
                <RowDefinition Height="30"/>         <!-- 1: ContentItems  TODO: Bind height  -->
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20"/>       <!-- 0: Intend -->
                <ColumnDefinition Width="10"/>       <!-- 1: List item symbol -->
                <ColumnDefinition Width="100*"/>     <!-- 2: ContentText -->
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="1" Text="•"/>
            <Label Grid.Row="0" Grid.Column="2" Text="{Binding ContentText}"/>
            <ListView Grid.Row="1" Grid.ColumnSpan="3" ItemsSource="{Binding ContentItems}" HasUnevenRows="True" HorizontalOptions="Fill" IsVisible="{Binding HasSubContentItems}">
                <ListView.ItemTemplate HorizontalOptions="Fill">
                    <DataTemplate>
                        <ViewCell>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="{Binding Height}"/>   <!-- 0: Sub Item's Content -->
                                </Grid.RowDefinitions>
                                <views:NestedContentListView Grid.Row="0" Grid.Column="0" BindingContext="{Binding This}" Margin="20,0,0,0"/>
                            </Grid>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

        </Grid>
  </ContentView.Content>
</ContentView>